---
layout: home

hero:
  name: "TerraCi"
  text: "–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞–π–ø–ª–∞–π–Ω–æ–≤ Terraform"
  tagline: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è GitLab CI –ø–∞–π–ø–ª–∞–π–Ω–æ–≤ —Å —É—á—ë—Ç–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è –≤–∞—à–∏—Ö Terraform/OpenTofu –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
  actions:
    - theme: brand
      text: –ù–∞—á–∞—Ç—å
      link: /ru/guide/getting-started
    - theme: alt
      text: GitHub
      link: https://github.com/edelwud/terraci

features:
  - icon: üîç
    title: –£–º–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ
    details: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç Terraform-–º–æ–¥—É–ª–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–∞–±–º–æ–¥—É–ª–∏ –Ω–∞ –≥–ª—É–±–∏–Ω–µ 4 –∏ 5.
  - icon: üîó
    title: –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
    details: –ü–∞—Ä—Å–∏—Ç –±–ª–æ–∫–∏ terraform_remote_state –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Ç–æ—á–Ω–æ–≥–æ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç for_each –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å—Å—ã–ª–∫–∏.
  - icon: ‚ö°
    title: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
    details: –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –º–æ–¥—É–ª–∏ –≤ —É—Ä–æ–≤–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ —Å–æ–±–ª—é–¥–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
  - icon: üéØ
    title: –ü–∞–π–ø–ª–∞–π–Ω—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
    details: Git-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–∞–π–ø–ª–∞–π–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã—Ö –º–æ–¥—É–ª–µ–π –∏ –∏—Ö –∑–∞–≤–∏—Å–∏–º—ã—Ö.
  - icon: üîÑ
    title: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ OpenTofu
    details: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Terraform –∏ OpenTofu. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –æ–¥–Ω—É –æ–ø—Ü–∏—é –≤ –∫–æ–Ω—Ñ–∏–≥–µ.
  - icon: üìä
    title: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞
    details: –≠–∫—Å–ø–æ—Ä—Ç –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ —Ñ–æ—Ä–º–∞—Ç DOT –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é GraphViz.
---

## –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–∏–º–µ—Ä

```bash
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
terraci init

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞ –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
terraci generate -o .gitlab-ci.yml

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
terraci generate --changed-only --base-ref main -o .gitlab-ci.yml
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

TerraCi –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤–∞—à–µ–≥–æ Terraform-–ø—Ä–æ–µ–∫—Ç–∞:

```
infrastructure/
‚îú‚îÄ‚îÄ service/
‚îÇ   ‚îî‚îÄ‚îÄ environment/
‚îÇ       ‚îî‚îÄ‚îÄ region/
‚îÇ           ‚îú‚îÄ‚îÄ vpc/          # –ú–æ–¥—É–ª—å –Ω–∞ –≥–ª—É–±–∏–Ω–µ 4
‚îÇ           ‚îú‚îÄ‚îÄ eks/          # –ó–∞–≤–∏—Å–∏—Ç –æ—Ç vpc
‚îÇ           ‚îî‚îÄ‚îÄ ec2/
‚îÇ               ‚îî‚îÄ‚îÄ rabbitmq/ # –°–∞–±–º–æ–¥—É–ª—å –Ω–∞ –≥–ª—É–±–∏–Ω–µ 5
```

–ü–∞—Ä—Å–∏—Ç data-–∏—Å—Ç–æ—á–Ω–∏–∫–∏ `terraform_remote_state` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

```hcl
data "terraform_remote_state" "vpc" {
  backend = "s3"
  config = {
    bucket = "terraform-state"
    key    = "cdp/stage/eu-central-1/vpc/terraform.tfstate"
  }
}
```

–ò –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç GitLab CI –ø–∞–π–ø–ª–∞–π–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

```yaml
stages:
  - deploy-plan-0
  - deploy-apply-0
  - deploy-plan-1
  - deploy-apply-1

plan-cdp-stage-eu-central-1-vpc:
  stage: deploy-plan-0
  script:
    - ${TERRAFORM_BINARY} plan -out=plan.tfplan

plan-cdp-stage-eu-central-1-eks:
  stage: deploy-plan-1
  needs:
    - apply-cdp-stage-eu-central-1-vpc
```
